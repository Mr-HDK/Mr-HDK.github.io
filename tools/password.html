<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Password Pulse Â· Mr&nbsp;HDK</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-pQeb5jAkFrXdYpfr6qytn+7vfVbNvUrP1hdE+e2PFMqPZe8VdZVSf0y99aHJH98nnY1JX1LX0kC73BMAzEhegQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body class="tool-page">
    <button id="theme-toggle" aria-label="Toggle theme">
        <span class="toggle-icon"><i class="fa-solid fa-moon"></i></span>
        <span class="toggle-label">Shift&nbsp;Mode</span>
        <span class="toggle-glow"></span>
    </button>
    <header id="hero" class="hero-mini">
        <div class="hero-inner">
            <div class="hero-content">
                <div class="hero-title-stack">
                    <h1>Password Pulse</h1>
                    <p class="hero-subtitle">Estimate password strength, entropy, and quick remediation tips for safer creds.</p>
                </div>
            </div>
        </div>
    </header>
    <nav id="navbar">
        <ul>
            <li><a href="../index.html">Home</a></li>
            <li><a href="#pulse">Analyzer</a></li>
        </ul>
    </nav>
    <main>
        <section id="pulse" class="section">
            <h2>Check&nbsp;Strength</h2>
            <div class="cards-grid" style="grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));">
                <article class="card">
                    <h3>Input Secret</h3>
                    <input type="password" id="passwordInput" placeholder="Enter a password" oninput="analyzePassword()" />
                    <label><input type="checkbox" id="showPassword" onchange="toggleVisibility()"> Show password</label>
                    <p id="scoreLabel" class="badge">Waiting for input...</p>
                </article>
                <article class="card">
                    <h3>Entropy &amp; Hints</h3>
                    <ul id="adviceList"></ul>
                    <p id="entropyValue"></p>
                </article>
            </div>
        </section>
    </main>
    <footer>
        <p>&copy;&nbsp;<span id="year"></span>&nbsp;Mr&nbsp;HDK</p>
    </footer>
    <script src="../script.js"></script>
    <script>
        const scoreLabel = document.getElementById('scoreLabel');
        const adviceList = document.getElementById('adviceList');
        const entropyValue = document.getElementById('entropyValue');

        function analyzePassword() {
            const pwdInput = document.getElementById('passwordInput');
            const pwd = pwdInput.value || '';

            if (!pwd) {
                scoreLabel.textContent = 'Waiting for input...';
                adviceList.innerHTML = '';
                entropyValue.textContent = '';
                return;
            }

            const checks = [
                { regex: /[a-z]/, message: 'Add lowercase letters', present: false },
                { regex: /[A-Z]/, message: 'Add uppercase letters', present: false },
                { regex: /[0-9]/, message: 'Add digits', present: false },
                { regex: /[^A-Za-z0-9]/, message: 'Add special symbols', present: false }
            ];

            let poolSize = 0;
            checks.forEach(check => {
                if (check.regex.test(pwd)) {
                    check.present = true;
                }
            });

            poolSize += checks[0].present ? 26 : 0;
            poolSize += checks[1].present ? 26 : 0;
            poolSize += checks[2].present ? 10 : 0;
            poolSize += checks[3].present ? 32 : 0;
            if (poolSize === 0) poolSize = 26;

            const entropy = Math.round(pwd.length * Math.log2(poolSize));

            let score = 0;
            if (pwd.length >= 12) score++;
            if (pwd.length >= 16) score++;
            if (checks.filter(c => c.present).length >= 3) score++;
            if (entropy >= 80) score++;

            const states = ['Weak', 'Fair', 'Strong', 'Robust'];
            scoreLabel.textContent = `Strength: ${states[Math.min(score, states.length - 1)]}`;
            entropyValue.textContent = `Entropy estimate: ${entropy} bits`;

            adviceList.innerHTML = '';
            checks.filter(c => !c.present).forEach(check => {
                const li = document.createElement('li');
                li.textContent = check.message;
                adviceList.appendChild(li);
            });
            if (pwd.length < 12) {
                const li = document.createElement('li');
                li.textContent = 'Increase length to at least 12 characters.';
                adviceList.appendChild(li);
            }
            if (entropy < 80) {
                const li = document.createElement('li');
                li.textContent = 'Consider using a passphrase or password manager for more entropy.';
                adviceList.appendChild(li);
            }
            if (!adviceList.children.length) {
                const li = document.createElement('li');
                li.textContent = 'Great! Remember to store it in a secure vault and rotate regularly.';
                adviceList.appendChild(li);
            }
        }

        function toggleVisibility() {
            const input = document.getElementById('passwordInput');
            input.type = document.getElementById('showPassword').checked ? 'text' : 'password';
        }
    </script>
</body>
</html>
